// Generated by CoffeeScript 1.3.3
var EDJ,
  __slice = [].slice;

EDJ = (function() {
  var _this = this;

  EDJ.settings = {
    debug: false,
    STATIC_URL: "/static/"
  };

  function EDJ(settings) {
    /*
            Cache some stuff, set off some methods
            -----------------------------------------------------------------------
    */
    $.extend(this.constructor.settings, settings);
    this.constructor.$body = $("body");
    this.constructor.go_go_go();
  }

  EDJ.log = function() {
    var args, message, _i, _len, _results;
    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    /*
            If we have a log, and we're in debug then use it
            -----------------------------------------------------------------------
    */

    if (EDJ.settings.debug && (typeof console !== "undefined" && console !== null)) {
      _results = [];
      for (_i = 0, _len = args.length; _i < _len; _i++) {
        message = args[_i];
        _results.push(console.log(message));
      }
      return _results;
    }
  };

  EDJ.go_go_go = function() {
    /*
            Determines all methods to run, and runs them
            -----------------------------------------------------------------------
    */

    var prop, _results, _run;
    _results = [];
    for (prop in EDJ) {
      _run = EDJ[prop].run;
      if ((typeof _run === "boolean" && _run) || (typeof _run === "function" && _run())) {
        EDJ.log("EDJ running " + prop);
        _results.push(EDJ[prop].init());
      } else {
        _results.push(void 0);
      }
    }
    return _results;
  };

  EDJ.ios_rotate_fix = {
    /*
            Alter viewport meta when device rotates
    
            Orientation and scale, Jeremy Keith: http://adactio.com/journal/4470/
            -----------------------------------------------------------------------
    */

    run: function() {
      return navigator.userAgent.match(/(ipad|iphone)/i);
    },
    init: function() {
      var viewportmeta;
      viewportmeta = document.querySelectorAll("meta[name='viewport']")[0];
      if (viewportmeta) {
        viewportmeta.content = "width=device-width, minimum-scale=1.0, maximum-scale=1.0";
        return EDJ.$body.addEventListener("gesturestart", function() {
          return viewportmeta.content = "width=device-width, minimum-scale=0.25, maximum-scale=1.6";
        }, false);
      }
    }
  };

  return EDJ;

}).call(this);
